# GaussianTalker è¯„ä¼°æŒ‡æ ‡ç³»ç»Ÿ

## ğŸ“ é¡¹ç›®ä½ç½®

```
TFG_ui_GaussianTalker/GaussianTalker/evaluation/
â”œâ”€â”€ Dockerfile              # Dockeré•œåƒå®šä¹‰
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–åˆ—è¡¨
â”œâ”€â”€ evaluate_metrics.py     # æ ¸å¿ƒè¯„ä¼°è„šæœ¬ï¼ˆ541è¡Œï¼‰
â”œâ”€â”€ README.md              # è‹±æ–‡ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ é¡¹ç›®è¯´æ˜.md            # æœ¬æ–‡æ¡£ï¼ˆä¸­æ–‡è¯´æ˜ï¼‰
â”œâ”€â”€ build.bat              # Windows Dockeræ„å»ºè„šæœ¬
â”œâ”€â”€ run_example.bat        # Windowsè¿è¡Œç¤ºä¾‹è„šæœ¬
â””â”€â”€ .dockerignore          # Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶
```

## âœ… å·²å®ç°åŠŸèƒ½

### 1. 6ä¸ªæ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡

| æŒ‡æ ‡ | ä¸­æ–‡åç§° | è¯´æ˜ | è¾“å‡ºæ–¹å‘ |
|------|----------|------|----------|
| **NIQE** | è‡ªç„¶å›¾åƒè´¨é‡è¯„ä¼°å™¨ | æ— éœ€å‚è€ƒå›¾åƒï¼Œè¯„ä¼°ç”Ÿæˆå›¾åƒçš„è‡ªç„¶åº¦ | â†“ è¶Šä½è¶Šå¥½ |
| **PSNR** | å³°å€¼ä¿¡å™ªæ¯” | è¡¡é‡å›¾åƒé‡å»ºè´¨é‡ | â†‘ è¶Šé«˜è¶Šå¥½ |
| **FID** | å¼—é›·æ­‡Inceptionè·ç¦» | è¯„ä¼°ç”Ÿæˆå›¾åƒçš„çœŸå®æ„Ÿ | â†“ è¶Šä½è¶Šå¥½ |
| **SSIM** | ç»“æ„ç›¸ä¼¼æ€§æŒ‡æ•° | è¡¡é‡å›¾åƒç»“æ„ç›¸ä¼¼åº¦ | â†‘ è¶Šé«˜è¶Šå¥½ |
| **LSE-C** | éŸ³é¢‘åŒæ­¥ç½®ä¿¡åº¦ | è¯„ä¼°å”‡å½¢ä¸éŸ³é¢‘åŒæ­¥ç¨‹åº¦ï¼ˆç½®ä¿¡åº¦ï¼‰ | â†‘ è¶Šé«˜è¶Šå¥½ |
| **LSE-D** | éŸ³é¢‘åŒæ­¥è·ç¦» | è¯„ä¼°å”‡å½¢ä¸éŸ³é¢‘åŒæ­¥ç¨‹åº¦ï¼ˆè·ç¦»ï¼‰ | â†“ è¶Šä½è¶Šå¥½ |

### 2. Dockerå®Œæ•´å°è£…

- âœ… åŸºäºPyTorch 2.0.1 + CUDA 11.7
- âœ… æ”¯æŒCPUå’ŒGPUè¿è¡Œ
- âœ… ä¸€é”®æ„å»ºã€ä¸€é”®è¿è¡Œ
- âœ… è¾“å…¥/è¾“å‡ºç›®å½•æ˜ å°„
- âœ… ç‹¬ç«‹è¿è¡Œï¼Œæ— éœ€å®¿ä¸»æœºå®‰è£…ä¾èµ–

### 3. æ ‡å‡†åŒ–è¾“å‡º

```json
{
  "psnr": {"mean": 28.45, "std": 2.31, "min": 24.12, "max": 32.67},
  "ssim": {"mean": 0.8523, "std": 0.0421, "min": 0.7234, "max": 0.9123},
  "fid": 45.23,
  "niqe": {"mean": 4.12, "std": 0.87},
  "lse_c": {"mean": 0.7834, "std": 0.1023},
  "lse_d": {"mean": 0.2166, "std": 0.1023}
}
```

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### æ–¹å¼ä¸€ï¼šDockerï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

```powershell
# 1. è¿›å…¥è¯„ä¼°ç›®å½•
cd D:\TFG\TFG_ui_GaussianTalker\GaussianTalker\evaluation

# 2. æ„å»ºé•œåƒ
.\build.bat

# 3. å‡†å¤‡è§†é¢‘æ–‡ä»¶ç»“æ„
# your_videos/
# â”œâ”€â”€ original/
# â”‚   â””â”€â”€ video.mp4      # åŸå§‹è§†é¢‘
# â””â”€â”€ generated/
#     â””â”€â”€ video.mp4      # ç”Ÿæˆçš„è§†é¢‘

# 4. è¿è¡Œè¯„ä¼°
docker run --rm ^
  -v D:\path\to\your_videos:/app/input ^
  -v D:\path\to\output:/app/output ^
  gaussiantalker-eval:latest
```

### æ–¹å¼äºŒï¼šç›´æ¥è¿è¡Œï¼ˆå¼€å‘è°ƒè¯•ï¼‰

```powershell
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. è¿è¡Œè¯„ä¼°
python evaluate_metrics.py ^
  --original_video original.mp4 ^
  --generated_video generated.mp4 ^
  --output_dir ./results
```

## ğŸ“Š è¯„ä¼°æ ‡å‡†å‚è€ƒ

### PSNRï¼ˆå³°å€¼ä¿¡å™ªæ¯”ï¼‰
- **ä¼˜ç§€**: > 30 dB
- **è‰¯å¥½**: 27-30 dB
- **åˆæ ¼**: 25-27 dB
- **éœ€æ”¹è¿›**: < 25 dB

### SSIMï¼ˆç»“æ„ç›¸ä¼¼æ€§ï¼‰
- **ä¼˜ç§€**: > 0.85
- **è‰¯å¥½**: 0.80-0.85
- **åˆæ ¼**: 0.75-0.80
- **éœ€æ”¹è¿›**: < 0.75

### FIDï¼ˆçœŸå®æ„Ÿè·ç¦»ï¼‰
- **ä¼˜ç§€**: < 50
- **è‰¯å¥½**: 50-100
- **åˆæ ¼**: 100-200
- **éœ€æ”¹è¿›**: > 200

### NIQEï¼ˆå›¾åƒè´¨é‡ï¼‰
- **ä¼˜ç§€**: < 3.0
- **è‰¯å¥½**: 3.0-5.0
- **åˆæ ¼**: 5.0-7.0
- **éœ€æ”¹è¿›**: > 7.0

### LSE-Cï¼ˆåŒæ­¥ç½®ä¿¡åº¦ï¼‰
- **ä¼˜ç§€**: > 0.8
- **è‰¯å¥½**: 0.7-0.8
- **åˆæ ¼**: 0.6-0.7
- **éœ€æ”¹è¿›**: < 0.6

### LSE-Dï¼ˆåŒæ­¥è·ç¦»ï¼‰
- **ä¼˜ç§€**: < 0.2
- **è‰¯å¥½**: 0.2-0.3
- **åˆæ ¼**: 0.3-0.4
- **éœ€æ”¹è¿›**: > 0.4

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **PyTorch 2.0.1**: æ·±åº¦å­¦ä¹ æ¡†æ¶
- **CUDA 11.7**: GPUåŠ é€Ÿ
- **pyiqa**: NIQEæŒ‡æ ‡å®ç°
- **librosa**: éŸ³é¢‘å¤„ç†ï¼ˆLSE-C/Dï¼‰
- **scikit-image**: ä¼ ç»Ÿå›¾åƒæŒ‡æ ‡ï¼ˆPSNR/SSIMï¼‰
- **torchvision**: Inception v3ï¼ˆFIDï¼‰

### å…³é”®å®ç°
1. **PSNR**: ä½¿ç”¨GaussianTalkerå®˜æ–¹å®ç°ï¼ˆutils/image_utils.pyï¼‰
2. **FID**: åŸºäºInception v3æå–2048ç»´ç‰¹å¾
3. **NIQE**: ä½¿ç”¨pyiqaé¢„è®­ç»ƒæ¨¡å‹
4. **LSE-C/D**: å®ç°å®Œæ•´çš„SyncNetæ¨¡å‹ï¼ˆéŸ³é¢‘+è§†é¢‘åŒåˆ†æ”¯ï¼‰

### é¢„å¤„ç†æµç¨‹
```python
1. åŠ è½½è§†é¢‘å¸§ï¼ˆOpenCVï¼‰
2. ä¸­å¿ƒè£å‰ªä¸ºæ­£æ–¹å½¢
3. ç¼©æ”¾åˆ° 512Ã—512ï¼ˆä¸GaussianTalkerè®­ç»ƒæ—¶ä¸€è‡´ï¼‰
4. è®¡ç®—å„é¡¹æŒ‡æ ‡
5. è¾“å‡ºJSONæ ¼å¼ç»“æœ
```

## ğŸ¯ ä¸testtt/evaluate_final.pyçš„åŒºåˆ«

| ç‰¹æ€§ | testtt/evaluate_final.py | evaluation/ï¼ˆæœ¬é¡¹ç›®ï¼‰ |
|------|--------------------------|----------------------|
| Dockerå°è£… | âŒ æ—  | âœ… å®Œæ•´æ”¯æŒ |
| è¾“å…¥æ–¹å¼ | éœ€è¦transforms_val.json | ç›´æ¥ä½¿ç”¨è§†é¢‘æ–‡ä»¶ |
| è¾“å‡ºæ ¼å¼ | æ–‡æœ¬æ–‡ä»¶ | JSONï¼ˆç»“æ„åŒ–ï¼‰ |
| éƒ¨ç½²æ–¹å¼ | ä¾èµ–å®Œæ•´GaussianTalkerç¯å¢ƒ | ç‹¬ç«‹è¿è¡Œ |
| æ˜“ç”¨æ€§ | éœ€è¦é…ç½®å¤šä¸ªç¯å¢ƒå˜é‡ | ç®€å•å‘½ä»¤è¡Œå‚æ•° |

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šè¯„ä¼°testttä¸­çš„è§†é¢‘

```powershell
cd evaluation
python evaluate_metrics.py ^
  --original_video ..\testtt\original.mp4 ^
  --generated_video ..\testtt\output.mp4 ^
  --output_dir ..\testtt\evaluation_results
```

### ç¤ºä¾‹2ï¼šDockeræ‰¹é‡è¯„ä¼°

```powershell
# å‡†å¤‡å¤šä¸ªè§†é¢‘å¯¹
docker run --rm ^
  -v D:\videos\test1:/app/input ^
  -v D:\results\test1:/app/output ^
  gaussiantalker-eval:latest

docker run --rm ^
  -v D:\videos\test2:/app/input ^
  -v D:\results\test2:/app/output ^
  gaussiantalker-eval:latest
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è§†é¢‘æ ¼å¼**: å»ºè®®ä½¿ç”¨mp4æ ¼å¼ï¼Œå¦‚æœé‡åˆ°é—®é¢˜è¯·ç”¨ffmpegè½¬æ¢
2. **å¸§æ•°å¯¹é½**: åŸå§‹è§†é¢‘å’Œç”Ÿæˆè§†é¢‘ä¼šè‡ªåŠ¨å¯¹é½åˆ°è¾ƒçŸ­çš„é‚£ä¸ª
3. **GPUåŠ é€Ÿ**: ä½¿ç”¨`--gpus all`å‚æ•°å¯ä»¥åŠ é€ŸFIDå’ŒNIQEè®¡ç®—
4. **NIQEæ¨¡å‹**: é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œå¦‚æœç½‘ç»œæœ‰é—®é¢˜éœ€è¦æ‰‹åŠ¨ä¸‹è½½

## ğŸ› å¸¸è§é—®é¢˜

### Q1: Dockeræ„å»ºå¤±è´¥
**A**: ä½¿ç”¨å›½å†…é•œåƒæºæˆ–æ£€æŸ¥ç½‘ç»œè¿æ¥

### Q2: NIQEè®¡ç®—å¤±è´¥
**A**: æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹æ–‡ä»¶åˆ° `~/.cache/pyiqa/hub/pyiqa/`

### Q3: è§†é¢‘æ— æ³•è¯»å–
**A**: ä½¿ç”¨ffmpegè½¬æ¢ä¸ºæ ‡å‡†mp4æ ¼å¼

### Q4: GPUä¸å¯ç”¨
**A**: ç¡®ä¿å®‰è£…äº†NVIDIA Docker runtime

## ğŸ“„ è®¸å¯è¯

æœ¬è¯„ä¼°ç³»ç»ŸåŸºäºGaussianTalkeré¡¹ç›®å¼€å‘ï¼Œéµå¾ªç›¸åŒçš„è®¸å¯è¯ã€‚

---

**åˆ›å»ºæ—¥æœŸ**: 2025-12-21  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

